openapi: 3.0.0

info:
  title: A mockup of the hts SSO api
  description: "This API should allow users to login, register and manage their HTS accounts."
  version: 0.0.1
paths:
  /login:
    post:
      tags:
        - Authentication
      summary: Send a value
      description: "This API allows the user to login to their hackthissite.org account. Authentication is done in three steps: Username, Password and MFA (if enabled). After each step, the user may be required to complete a CAPTCHA."
      parameters: 
        - name: frame
          description: "The frame that was submitted by the user"
          required: true
          in: query
          schema:
            type: string
            enum:
              - username
              - password
              - mfa

        - name: value
          description: "The value submitted by the user"
          required: true
          in: query
          schema:
            type: string

      responses:
        "200":
          description: "The server encountered no errors and is either ready to receive the next
          info or returned an authentication cookie (authentication complete)"
          content:
            application/json:
              schema:
                type: object
                properties:
                  next:
                    description:
                      "The next frame that should be shown to the user"
                    type: string
                    enum:
                      - username
                      - password
                      - mfa
                      - done
                  show_captcha:
                    description: "Whether or not the user must complete a captcha to continue authentication"
                    type: boolean
                example:
                  next: password
                  show_captcha: false
        "403":
          description: "The credentials submitted by the user are invalid. The client should re-send the previous request with the correct value"
          content:
            application/json:
              schema:
                type: object
                properties:
                  show_captcha:
                    description: "Whether or not the user must complete a captcha to continue authentication"
                    type: boolean
        "500": 
          description: "The server has encountered a situation it does not know how to handle. The client should restart authentication from the beginning"
